---
// Import global styles
import "../style/global.css";

export interface Props {
	title?: string;
	description?: string;
	canonicalUrl?: string;
	ogType?: string;
	ogImage?: string;
}

const {
	title = "Free SEO Checklist 2026 - Complete AI SEO Guide & Tools | SarvaSEO",
	description = "Free comprehensive SEO checklist with 55+ actionable steps. Master SEO rankings with AI tools, keyword research, technical SEO, and proven strategies. Get instant search engine indexing with IndexNow integration!",
	canonicalUrl = "https://sarvaseo.atrey.dev/",
	ogType = "website",
	ogImage = "https://sarvaseo.atrey.dev/sarvaseo-og.png",
} = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!-- Preconnects FIRST for fastest DNS/TLS handshake -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link rel="preconnect" href="https://www.googletagmanager.com" />
		<link rel="preconnect" href="https://www.google-analytics.com" />
		<link rel="preconnect" href="https://www.clarity.ms" />

		<!-- Favicon Configuration - Multiple formats for maximum compatibility -->
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="apple-touch-icon" href="/favicon.ico" />
		<meta name="generator" content={Astro.generator} />

		<!-- SEO Meta Tags -->
		<title>{title}</title>
		<meta name="description" content={description} />
		<meta
			name="keywords"
			content="free SEO checklist, AI SEO, how to improve SEO, SEO guide 2026, search engine optimization, keyword research, technical SEO, SEO tools, SEO ranking factors, website optimization, SEO audit, local SEO, content SEO, link building, page speed optimization, mobile SEO, SEO best practices, organic traffic, SERP ranking, Google SEO, SEO strategy"
		/>
		<meta name="author" content="SarvaSEO - Built by atrey.dev" />
		<meta
			name="robots"
			content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"
		/>
		<meta name="googlebot" content="index, follow" />
		<meta
			name="google-site-verification"
			content="vfl_Z9jHpXJBVtYEGNKNsxdFq_9HMWyKZNYF8ZuH4WE"
		/>
		<meta name="msvalidate.01" content="09DA5E83D4AFE5E809803FF539F307C2" />
		<meta name="IndexNow" content="0177dad855f84bc3900bf90ee223115c" />
		<link rel="canonical" href={canonicalUrl} />

		<!-- Additional SEO Meta Tags for Better Indexing -->
		<meta name="rating" content="general" />
		<meta name="revisit-after" content="7 days" />
		<meta name="distribution" content="global" />
		<meta name="language" content="en" />
		<meta name="geo.region" content="US" />
		<meta name="geo.placename" content="United States" />

		<!-- Open Graph Meta Tags -->
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:type" content={ogType} />
		<meta property="og:url" content={canonicalUrl} />
		<meta property="og:site_name" content="SarvaSEO" />
		<meta property="og:locale" content="en_US" />
		<meta property="og:image" content={ogImage} />
		<meta property="og:image:width" content="1200" />
		<meta property="og:image:height" content="630" />
		<meta property="og:image:type" content="image/png" />
		<meta property="og:image:alt" content="SarvaSEO - Free SEO Checklist 2026 with AI Tools and Proven Strategies" />

		<!-- Twitter Card Meta Tags -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content={ogImage} />
		<meta name="twitter:image:alt" content="SarvaSEO - Free SEO Checklist 2026 with AI Tools and Proven Strategies" />

		<!-- SEO-Critical Meta Tags -->
		<meta name="theme-color" content="#d4911a" />
		<meta name="application-name" content="SarvaSEO" />
		<meta name="apple-mobile-web-app-title" content="SarvaSEO" />

		<!-- SEO-Critical Schema.org JSON-LD -->
		<script type="application/ld+json" is:inline>
			{
				"@context": "https://schema.org",
				"@type": "WebSite",
				"name": "SarvaSEO",
				"description": "Free comprehensive SEO checklist and guide with AI-powered tools for improving search engine rankings",
				"url": "https://sarvaseo.atrey.dev/",
				"author": {
					"@type": "Person",
					"name": "Atrey",
					"url": "https://atrey.dev"
				},
				"publisher": {
					"@type": "Organization",
					"name": "SarvaSEO",
					"url": "https://sarvaseo.atrey.dev/"
				},
				"mainEntity": {
					"@type": "HowTo",
					"name": "Complete SEO Checklist Guide",
					"description": "Step-by-step guide to improve your website's SEO rankings with proven strategies and AI tools",
					"totalTime": "PT2H",
					"step": [
						{
							"@type": "HowToStep",
							"name": "Foundation Setup",
							"text": "Set up Google Business Profile, Search Console, and basic technical SEO foundations"
						},
						{
							"@type": "HowToStep",
							"name": "Content Strategy",
							"text": "Perform keyword research, create SEO-optimized content, and build topical authority"
						},
						{
							"@type": "HowToStep",
							"name": "Technical Optimization",
							"text": "Optimize page speed, mobile responsiveness, and Core Web Vitals"
						}
					]
				}
			}
		</script>

		<!-- GA + Clarity deferred until after page load to avoid blocking FCP/LCP -->
		<script is:inline>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'G-86FV37CDCN');

			addEventListener('load', function() {
				// Load GA
				var ga = document.createElement('script');
				ga.src = 'https://www.googletagmanager.com/gtag/js?id=G-86FV37CDCN';
				ga.async = true;
				document.head.appendChild(ga);

				// Load Clarity
				(function (c, l, a, r, i, t, y) {
					c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments); };
					t = l.createElement(r); t.async = 1;
					t.src = "https://www.clarity.ms/tag/" + i + "?ref=bwt";
					y = l.getElementsByTagName(r)[0];
					y.parentNode.insertBefore(t, y);
				})(window, document, "clarity", "script", "t3llz3cw5l");
			});
		</script>

		<!-- Interactive System: Module Accordion + Inline Toggles -->
		<script is:inline>
			// Performance-optimized module system
			window.loadedModules = new Set();

			// MODULE LEVEL: Accordion behavior (one module open at a time)
			window.toggleModule = function (moduleId) {
				const toggle = document.querySelector(
					`[data-module-toggle="${moduleId}"]`,
				);
				const content = document.querySelector(
					`[data-module-content="${moduleId}"]`,
				);
				const chevron = document.querySelector(
					`[data-chevron="${moduleId}"]`,
				);
				const expanded =
					toggle?.getAttribute("aria-expanded") === "true";

				if (!content || !chevron || !toggle) return;

				// Close all other modules first (accordion behavior)
				document
					.querySelectorAll("[data-module-toggle]")
					.forEach((otherToggle) => {
						const otherId =
							otherToggle.getAttribute("data-module-toggle");
						if (otherId !== moduleId) {
							const otherContent = document.querySelector(
								`[data-module-content="${otherId}"]`,
							);
							const otherChevron = document.querySelector(
								`[data-chevron="${otherId}"]`,
							);
							if (otherContent && otherChevron) {
								otherContent.classList.add("hidden");
								otherChevron.style.transform = "";
								otherToggle.setAttribute(
									"aria-expanded",
									"false",
								);
							}
						}
					});

				// Toggle current module
				if (expanded) {
					content.classList.add("hidden");
					chevron.style.transform = "";
					toggle.setAttribute("aria-expanded", "false");
				} else {
					// Load content if not already loaded
					if (!window.loadedModules.has(moduleId)) {
						loadModuleContent(moduleId);
					}
					content.classList.remove("hidden");
					chevron.style.transform = "rotate(180deg)";
					toggle.setAttribute("aria-expanded", "true");
				}
			};

			// Load module content
			window.loadModuleContent = function (moduleId) {
				if (window.loadedModules.has(moduleId)) return;

				const stepsContainer = document.querySelector(
					`[data-steps-container="${moduleId}"]`,
				);
				if (!stepsContainer) return;

				// Content is already rendered by Astro, just mark as loaded
				window.loadedModules.add(moduleId);
			};

			// Step toggle function
			window.toggleStep = function (stepId) {
				var toggle = document.querySelector('[data-step-toggle="' + stepId + '"]');
				var content = document.querySelector('[data-step-content="' + stepId + '"]');
				var chevron = document.querySelector('[data-step-chevron="' + stepId + '"]');
				if (!toggle || !content || !chevron) return;
				var expanded = toggle.getAttribute("aria-expanded") === "true";
				if (expanded) {
					content.classList.add("hidden");
					chevron.style.transform = "";
					toggle.setAttribute("aria-expanded", "false");
				} else {
					content.classList.remove("hidden");
					chevron.style.transform = "rotate(180deg)";
					toggle.setAttribute("aria-expanded", "true");
				}
			};

			// Event delegation
			document.addEventListener("click", function (e) {
				// Handle premium step clicks (redirect to login)
				var premiumStep = e.target.closest("[data-premium='true']");
				if (premiumStep && premiumStep.classList.contains("premium-locked")) {
					e.preventDefault();
					e.stopPropagation();
					window.location.href = "/api/auth/linkedin/login";
					return;
				}

				// Handle step toggles (check before module toggles)
				var stepToggle = e.target.closest("[data-step-toggle]");
				if (stepToggle) {
					e.preventDefault();
					e.stopPropagation();
					var stepId = stepToggle.getAttribute("data-step-toggle");
					toggleStep(stepId);
					return;
				}

				// Handle module toggles
				const moduleToggle = e.target.closest("[data-module-toggle]");
				if (moduleToggle) {
					e.preventDefault();
					e.stopPropagation();
					const moduleId =
						moduleToggle.getAttribute("data-module-toggle");
					toggleModule(moduleId);
					return;
				}
			});

			// Keyboard support
			document.addEventListener("keydown", function (e) {
				if (e.key === "Enter" || e.key === " ") {
					// Handle step keyboard navigation
					var stepToggle = e.target.closest("[data-step-toggle]");
					if (stepToggle) {
						e.preventDefault();
						var stepId = stepToggle.getAttribute("data-step-toggle");
						toggleStep(stepId);
						return;
					}

					// Handle module keyboard navigation
					const moduleToggle = e.target.closest(
						"[data-module-toggle]",
					);
					if (moduleToggle) {
						e.preventDefault();
						const moduleId =
							moduleToggle.getAttribute("data-module-toggle");
						toggleModule(moduleId);
						return;
					}
				}
			});
		</script>

		<!-- Auth Management Script -->
		<script is:inline>
			(function () {
				function isAuthenticated() {
					return document.cookie.split(";").some(function (c) {
						return c.trim().startsWith("sarvaseo_logged_in=");
					});
				}

				function unlockPremiumContent() {
					// Module 5 (Cartel) - show "coming soon" message
					var cartelModule = document.querySelector("[data-module-id='5']");
					if (cartelModule) {
						cartelModule.querySelectorAll("[data-lock-badge]").forEach(function (el) {
							el.textContent = "ðŸš€ Coming soon";
							el.classList.remove("text-gold-600");
							el.classList.add("text-gray-500");
						});
						var cartelModuleBadge = cartelModule.querySelector("[data-module-lock-badge]");
						if (cartelModuleBadge) {
							cartelModuleBadge.textContent = "ðŸš€ Coming soon, we will reach out to you";
							cartelModuleBadge.classList.remove("text-gold-600");
							cartelModuleBadge.classList.add("text-gray-500");
						}
						cartelModule.querySelectorAll("[data-premium='true']").forEach(function (el) {
							el.classList.remove("premium-locked");
							var wrapper = el.querySelector(".bg-stone-50");
							if (wrapper) wrapper.classList.remove("bg-stone-50");
							var title = el.querySelector("h3");
							if (title) {
								title.classList.remove("text-gray-500");
								title.classList.add("text-gray-900");
							}
						});
						var cartelToggle = cartelModule.querySelector("[data-module-toggle]");
						if (cartelToggle) cartelToggle.classList.remove("opacity-75");
					}

					// Module 3 (Automation Toolkit) - LinkedIn gets link, others show "launching soon"
					var toolkitModule = document.querySelector("[data-module-id='3']");
					if (toolkitModule) {
						toolkitModule.querySelectorAll("[data-premium='true']").forEach(function (el) {
							el.classList.remove("premium-locked");
							var wrapper = el.querySelector(".bg-stone-50");
							if (wrapper) wrapper.classList.remove("bg-stone-50");
							var title = el.querySelector("h3");
							if (title) {
								title.classList.remove("text-gray-500");
								title.classList.add("text-gray-900");
							}
							var stepId = el.getAttribute("data-step");
							var badge = el.querySelector("[data-lock-badge]");
							if (stepId === "linkedin-engagement-bot") {
								if (badge) {
									badge.innerHTML = "<a href='https://chromewebstore.google.com/detail/licon-linkedin-connector/kgjdogbeahmdgdkddigjfofmdnkpcade' target='_blank' class='text-amber-700 hover:text-amber-800 underline'>ðŸ”— Get Chrome Extension</a>";
									badge.classList.remove("text-gold-600");
								}
							} else {
								if (badge) {
									badge.textContent = "ðŸš€ Launching soon";
									badge.classList.remove("text-gold-600");
									badge.classList.add("text-gray-500");
								}
							}
						});
						var toolkitModuleBadge = toolkitModule.querySelector("[data-module-lock-badge]");
						if (toolkitModuleBadge) {
							toolkitModuleBadge.textContent = "âœ“ Unlocked";
							toolkitModuleBadge.classList.remove("text-gold-600");
							toolkitModuleBadge.classList.add("text-green-600");
						}
						var toolkitToggle = toolkitModule.querySelector("[data-module-toggle]");
						if (toolkitToggle) toolkitToggle.classList.remove("opacity-75");
					}

					// All other premium modules - standard unlock
					document.querySelectorAll("[data-module-id]").forEach(function (mod) {
						var modId = mod.getAttribute("data-module-id");
						if (modId === "3" || modId === "5") return;

						mod.querySelectorAll(".premium-locked").forEach(function (el) {
							el.classList.remove("premium-locked");
						});
						mod.querySelectorAll("[data-lock-badge]").forEach(function (el) {
							el.textContent = "âœ“ Unlocked";
							el.classList.remove("text-gold-600");
							el.classList.add("text-green-600");
						});
						mod.querySelectorAll("[data-module-lock-badge]").forEach(function (el) {
							el.textContent = "âœ“ Unlocked";
							el.classList.remove("text-gold-600");
							el.classList.add("text-green-600");
						});
						mod.querySelectorAll("[data-premium='true']").forEach(function (el) {
							var wrapper = el.querySelector(".bg-stone-50");
							if (wrapper) wrapper.classList.remove("bg-stone-50");
							var title = el.querySelector("h3");
							if (title) {
								title.classList.remove("text-gray-500");
								title.classList.add("text-gray-900");
							}
						});
						var toggle = mod.querySelector("[data-module-toggle]");
						if (toggle) toggle.classList.remove("opacity-75");
					});
				}

				function updateAuthUI() {
					var userEl = document.getElementById("auth-user");

					if (isAuthenticated()) {
						if (userEl) userEl.classList.remove("hidden");
						unlockPremiumContent();
					}
				}

				function checkAuthStatus() {
					var params = new URLSearchParams(window.location.search);
					if (params.get("auth") === "success") {
						// Set a JS-readable marker cookie (the real auth cookie is HttpOnly)
						document.cookie = "sarvaseo_logged_in=1; Path=/; SameSite=Lax; Max-Age=604800";
						// Clean the URL
						var url = new URL(window.location.href);
						url.searchParams.delete("auth");
						window.history.replaceState({}, "", url.pathname);
					}
				}

				// Run on DOM ready
				if (document.readyState === "loading") {
					document.addEventListener("DOMContentLoaded", function () {
						checkAuthStatus();
						updateAuthUI();
					});
				} else {
					checkAuthStatus();
					updateAuthUI();
				}
			})();
		</script>

		<!-- DNS Prefetch for non-critical origins -->
		<link rel="dns-prefetch" href="https://api.indexnow.org" />
		<link rel="dns-prefetch" href="https://www.bing.com" />
		<link rel="dns-prefetch" href="https://yandex.com" />

		<!-- Non-blocking Font Loading with Error Handling -->
		<link
			href="https://fonts.googleapis.com/css2?family=Geist:wght@100..900&family=Instrument+Serif:ital@0;1&display=swap"
			rel="preload"
			as="style"
			onload="this.onload=null;this.rel='stylesheet'"
			onerror="console.warn('Font loading failed, using fallbacks')"
		/>
		<noscript>
			<link
				href="https://fonts.googleapis.com/css2?family=Geist:wght@100..900&family=Instrument+Serif:ital@0;1&display=swap"
				rel="stylesheet"
			/>
		</noscript>

		<!-- Critical CSS - Inlined for Performance -->
		<style>
			/* Font fallbacks to prevent layout shift */
			.font-geist {
				font-family:
					"Geist",
					-apple-system,
					BlinkMacSystemFont,
					"Segoe UI",
					Roboto,
					sans-serif;
			}
			.font-instrument {
				font-family: "Instrument Serif", Georgia, "Times New Roman",
					serif;
			}

			/* Critical above-the-fold styles */
			body {
				margin: 0;
				padding: 0;
			}
			.hero-section {
				min-height: 100vh;
			}
			.main-content {
				max-width: 768px;
				margin: 0 auto;
				padding: 0 1rem;
			}
			@media (min-width: 640px) {
				.main-content {
					padding: 0 4rem;
				}
			}

			/* Optimize LCP element */
			h1 {
				font-size: 3.75rem;
				line-height: 1;
				font-weight: 300;
				color: #111827;
			}
			@media (min-width: 640px) {
				h1 {
					font-size: 4.5rem;
				}
			}

			/* Reduce layout shift */
			.module-container {
				contain: layout style;
			}
			.step-container {
				contain: layout;
			}

			/* Premium locked overlay */
			.premium-locked {
				position: relative;
				opacity: 0.6;
			}
			.premium-locked::after {
				content: "";
				position: absolute;
				inset: 0;
				background: linear-gradient(to bottom, transparent 40%, rgba(255,255,255,0.9));
				pointer-events: none;
				border-radius: 0.25rem;
			}
		</style>

		<!-- Deferred non-critical scripts -->
		<script is:inline>
			addEventListener("load", function() {
				// IndexNow auto-submit (delayed)
				setTimeout(function() {
					fetch("/api/indexnow", {
						method: "POST",
						headers: { "Content-Type": "application/json" },
						body: JSON.stringify({ url: location.href }),
					}).catch(function() {});
				}, 5000);
			});
		</script>

		<!-- Valid Security Meta Tags -->
		<meta
			http-equiv="Content-Security-Policy"
			content="default-src 'self'; script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://www.google-analytics.com https://*.clarity.ms; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; connect-src 'self' https://www.google-analytics.com https://analytics.google.com https://*.clarity.ms https://www.linkedin.com; img-src 'self' data: https://www.google-analytics.com https://*.clarity.ms https://*.bing.com https://res.cloudinary.com;"
		/>
		<meta http-equiv="X-Content-Type-Options" content="nosniff" />
		<meta
			http-equiv="Referrer-Policy"
			content="strict-origin-when-cross-origin"
		/>
		<!-- Disable overscroll behavior -->
		<style is:inline>
			html,
			body {
				overscroll-behavior: none;
			}
		</style>
	</head>
	<body class="font-geist text-gray-900 antialiased">
		<div class="min-h-screen bg-gradient-to-br from-white to-stone-50">
			<slot />
		</div>
	</body>
</html>
